## DKMS Configuration for Enhanced Legion Laptop Kernel Module
## This enables automatic module rebuild on kernel updates

PACKAGE_NAME="legion-laptop-enhanced"
PACKAGE_VERSION="2.0.0"

# Build commands
CLEAN="make clean"
MAKE[0]="make all KERNEL_VERSION=$kernelver KERNEL_BUILD=/lib/modules/$kernelver/build"

# Module information
BUILT_MODULE_NAME[0]="legion_laptop_enhanced"
BUILT_MODULE_LOCATION[0]="."
DEST_MODULE_LOCATION[0]="/updates/dkms"

# Installation settings
AUTOINSTALL="yes"
REMAKE_INITRD="yes"

# Module metadata
MODULE_NAME="legion_laptop_enhanced"
MODULE_VERSION="2.0.0"
MODULE_AUTHOR="Vivek Chamoli <vivekchamoli@github.com>"
MODULE_DESCRIPTION="Enhanced Lenovo Legion laptop platform driver with universal Gen 6-9 support and kernel 5.4+ to 6.8+ compatibility"
MODULE_LICENSE="GPL v2"

# Kernel version compatibility
MINIMUM_KERNEL_VERSION="5.4.0"

# Optional post-installation hooks
POST_ADD="scripts/post-install.sh"
POST_INSTALL="scripts/post-install.sh"
PRE_REMOVE="scripts/pre-remove.sh"
POST_REMOVE="scripts/pre-remove.sh"